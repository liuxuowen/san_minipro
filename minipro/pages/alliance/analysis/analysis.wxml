<view class="container">
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">正在进行数据分析并生成图片...</text>
  </view>

  <view class="content" wx:else>
    <!-- Combined Card: Header + Group Selector -->
    <view class="info-card">
      <view class="card-header-row">
        <view class="breadcrumb" bindtap="goBack">
          <text class="back-icon">←</text>
          <text class="back-text">返回我的数据</text>
        </view>
      </view>

      <view class="header-section">
        <view class="title">{{title}}</view>
        <view class="subtitle">{{early_ts}} -> {{late_ts}}</view>
      </view>
      
      <view class="group-selector">
        <block wx:for="{{groups}}" wx:key="value">
          <view class="group-tab {{currentGroup === item.value ? 'active' : ''}}" bindtap="selectGroup" data-group="{{item.value}}">
            {{item.label}}
          </view>
        </block>
      </view>
    </view>

    <!-- Main Image Display -->
    <view class="image-container" wx:if="{{currentImage}}">
      <image 
        class="main-image" 
        src="{{currentImage}}" 
        mode="widthFix" 
        bindtap="previewImage" 
        show-menu-by-longpress="true"
      ></image>
      <view class="hint">点击图片预览，长按可保存/转发</view>
    </view>
    <view class="no-data" wx:else>
      <text>暂无图片数据</text>
    </view>
  </view>
</view>